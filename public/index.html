<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AlmaNyx — Portal da Espiral</title>
<meta name="description" content="Reflexões públicas da Espiral.">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<style>
  :root{
    --gold:#d4af37; --header:#8B0000; --white:#fff; --black:#111;
    --muted:#666; --line:#e8e8e8; --max:960px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{background:var(--gold);color:var(--black);font:400 16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,Arial}

  /* header */
  header{background:var(--header);color:#fff;position:sticky;top:0;z-index:20;box-shadow:0 6px 18px rgba(0,0,0,.15)}
  .header-inner{max-width:var(--max);margin:0 auto;padding:10px 14px;display:grid;grid-template-columns:1fr 40px;align-items:center;gap:10px}
  .welcome{font-weight:700;letter-spacing:.3px}
  .hamb{width:32px;height:32px;display:flex;flex-direction:column;justify-content:center;gap:6px;cursor:pointer}
  .hamb span{height:3px;background:#fff;border-radius:2px}

  /* menu lateral + backdrop */
  .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.4);opacity:0;pointer-events:none;transition:.25s;z-index:30}
  .backdrop.show{opacity:1;pointer-events:auto}
  nav.menu{position:fixed;top:0;right:-100%;height:100%;width:260px;background:#111;color:#fff;z-index:31;box-shadow:-6px 0 18px rgba(0,0,0,.35);padding:18px;display:flex;flex-direction:column;gap:12px;transition:.3s}
  nav.menu.open{right:0}

  /* BOTÕES DO MENU: vinho + dourado + texto branco */
  nav.menu a{
    display:block;
    text-align:center;
    color:#fff;
    background:linear-gradient(180deg,#8B0000 0%, #5f0000 100%);
    border:2px solid var(--gold);
    border-radius:12px;
    padding:12px 14px;
    font-weight:700;
    letter-spacing:.3px;
    text-decoration:none;
    box-shadow:
      0 6px 14px rgba(0,0,0,.25),
      inset 0 0 0 1px rgba(255,255,255,.08);
    transition:transform .15s ease, filter .15s ease, box-shadow .15s ease;
  }
  nav.menu a:hover{
    filter:brightness(1.08);
    transform:translateY(-1px);
    box-shadow:
      0 10px 20px rgba(0,0,0,.28),
      inset 0 0 0 1px rgba(255,255,255,.12);
  }
  nav.menu a:active{
    transform:translateY(0);
    filter:brightness(.97);
  }
  nav.menu a:focus-visible{
    outline:0;
    box-shadow:
      0 0 0 3px rgba(212,175,55,.45),
      0 10px 20px rgba(0,0,0,.28);
  }

  .closeBtn{align-self:flex-end;font-size:22px;cursor:pointer;margin-bottom:10px;color:#fff}

  /* logo */
  .logo-area{display:flex;justify-content:center;padding:14px 0}
  .logo{width:88px;height:88px;border-radius:999px;overflow:hidden;border:2px solid rgba(0,0,0,.12);background:rgba(255,255,255,.85);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,.12)}
  .logo img{width:100%;height:100%;object-fit:cover;display:block}

  /* banner (link por slide) */
  .banner{position:relative;width:100%;max-height:300px;overflow:hidden}
  .slide{display:none}
  .slide.active{display:block}
  .slide a{display:block}
  .slide a[href=""]{pointer-events:none}
  .banner video{width:100%;height:auto;object-fit:cover;background:#000;display:block}
  .dots{position:absolute;bottom:12px;left:50%;transform:translateX(-50%);display:flex;gap:6px;z-index:2}
  .dot{width:12px;height:12px;border-radius:50%;background:rgba(255,255,255,.6);cursor:pointer;transition:.3s}
  .dot.active{background:#fff}

  /* layout principal */
  .wrap{max-width:var(--max);margin:20px auto;padding:0 14px;display:grid;gap:16px}
  @media (min-width: 980px){
    .wrap{grid-template-columns:1fr 1fr}
  }

  /* cards (containers brancos) */
  .card{background:#fff;color:var(--black);border-radius:16px;border:1px solid var(--line);box-shadow:0 8px 24px rgba(0,0,0,.10);padding:22px}

  /* barra de busca dentro de um card próprio */
  .bar{display:flex;gap:10px;flex-wrap:wrap}
  input[type="search"]{flex:1 1 320px;padding:12px 14px;border:1px solid var(--line);border-radius:10px;outline:none}

  /* grid das postagens (cada post = card individual) */
  .posts-grid{display:grid;gap:16px}
  @media (min-width: 980px){
    .posts-grid{grid-column:1 / -1}
  }
  .post-card{background:#fff;border-radius:16px;border:1px solid var(--line);box-shadow:0 8px 24px rgba(0,0,0,.10);padding:22px}
  .post-card h2{margin:0 0 6px;font:700 22px/1.25 ui-serif, Georgia, serif}
  .post-card small{display:block;color:var(--muted);margin-bottom:10px}

  footer{text-align:center;color:#fff;background:var(--header);padding:16px;margin-top:24px;font-size:14px}
</style>
</head>
<body>
  <!-- header -->
  <header>
    <div class="header-inner">
      <div class="welcome">Sejam Bem-vindos!</div>
      <div class="hamb" id="menuBtn" aria-label="Abrir menu" title="Menu">
        <span></span><span></span><span></span>
      </div>
    </div>
  </header>

  <!-- logo -->
  <div class="logo-area"><div class="logo"><img src="./logo.png" alt="AlmaNyx"></div></div>

  <!-- banner com 3 links distintos -->
  <div class="banner" id="banner">
    <!-- SLIDE 1 -->
    <div class="slide active">
      <a href="https://www.tiktok.com/@almanyx.oficial?_t=ZM-8zVZZLMA7h2&_r=1" target="_blank" rel="noopener">
        <video autoplay muted loop playsinline preload="auto">
          <source src="./banner1-mobile-almanyx.mp4" type="video/webm" media="(max-width: 767px)">
          <source src="./banner1-desktop-almanyx.mp4" type="video/webm" media="(min-width: 768px)">
        </video>
      </a>
    </div>
    <!-- SLIDE 2 -->
    <div class="slide">
      <a href="https://www.youtube.com/@Almanyx.oficial" target="_blank" rel="noopener">
        <video autoplay muted loop playsinline preload="auto">
          <source src="./banner2-mobile-almanyx.mp4" type="video/webm" media="(max-width: 767px)">
          <source src="./banner2-desktop-almanyx.mp4" type="video/webm" media="(min-width: 768px)">
        </video>
      </a>
    </div>
    <!-- SLIDE 3 -->
    <div class="slide">
      <a href="https://www.instagram.com/almanyx.oficial?igsh=MWs1NmlzNm9sbjBzMg==" target="_blank" rel="noopener">
        <video autoplay muted loop playsinline preload="auto">
          <source src="./banner3-mobile-almanyx.mp4" type="video/webm" media="(max-width: 767px)">
          <source src="./banner3-desktop-almanyx.mp4" type="video/webm" media="(min-width: 768px)">
        </video>
      </a>
    </div>

    <div class="dots">
      <div class="dot active" data-i="0"></div>
      <div class="dot" data-i="1"></div>
      <div class="dot" data-i="2"></div>
    </div>
  </div>

  <!-- backdrop + menu -->
  <div class="backdrop" id="backdrop"></div>
  <nav class="menu" id="menu" aria-label="Menu">
    <div class="closeBtn" id="closeBtn">&times;</div>
    <a href="./sobre.html">Sobre</a>
    <a href="./postagens.html">Postagens</a>
    <a href="./redes-sociais.html">Redes Sociais</a>
    <a href="./contatos.html">Contatos</a>
  </nav>

  <!-- conteúdo (sem subtrair nada): card "Sobre", card "Busca" e posts como cards individuais -->
  <main class="wrap">
    <!-- CARD 1: SOBRE -->
    <section class="card" id="sobre-card">
      <div id="sobre">
        <h2>Olá,</h2>
        <p>Bem vindos ao portal oficial da Almanyx.</p>
      </div>
    </section>

    <!-- CARD 2: BUSCA -->
    <section class="card" id="busca-card">
      <div class="bar">
        <input id="q" type="search" placeholder="Pesquisar postagens…" autocomplete="off">
      </div>
    </section>

    <!-- POSTS: cada artigo vira um card branco independente -->
    <section id="posts" class="posts-grid" aria-live="polite"></section>
  </main>

  <footer>© 2025 Almanyx Oficial — Todos os Direitos Reservados</footer>

<script>
(function(){
  const $=(s,el=document)=>el.querySelector(s);
  const $$=(s,el=document)=>Array.from(el.querySelectorAll(s));

  /* menu */
  const menuBtn=$('#menuBtn'),menu=$('#menu'),backdrop=$('#backdrop'),closeBtn=$('#closeBtn');
  const openMenu=()=>{menu.classList.add('open');backdrop.classList.add('show');};
  const closeMenu=()=>{menu.classList.remove('open');backdrop.classList.remove('show');};
  menuBtn.addEventListener('click',openMenu);
  backdrop.addEventListener('click',closeMenu);
  closeBtn.addEventListener('click',closeMenu);
  document.addEventListener('keydown',e=>{if(e.key==='Escape')closeMenu();});

  /* carrossel com <div.slide> (link por slide) */
  const slides=$$('#banner .slide');
  const dots  =$$('#banner .dot');
  let i=0,timer;

  function show(n){
    i=(n+slides.length)%slides.length;
    slides.forEach((s,k)=>s.classList.toggle('active',k===i));
    dots.forEach((d,k)=>d.classList.toggle('active',k===i));
  }
  function next(){ show(i+1); }
  function start(){ stop(); timer=setInterval(next,6000); }
  function stop(){ if(timer) clearInterval(timer); }

  dots.forEach(d=>d.addEventListener('click',e=>{ show(+e.target.dataset.i); start(); }));
  $('#banner').addEventListener('mouseenter',stop);
  $('#banner').addEventListener('mouseleave',start);
  start();

  /* posts (3 mais recentes), mantendo sua fonte via JSON */
  const POSTS_SRC='./espiral.json';
  const postsEl=$('#posts'), qInput=$('#q');

  function render(list){
    postsEl.innerHTML='';
    list.forEach(p=>{
      const el=document.createElement('article');
      el.className='post-card';
      el.innerHTML=`<h2>${p.titulo??'Sem título'}</h2>
                    <small>${p.data??''}</small>
                    <div>${p.corpo??''}</div>`;
      postsEl.appendChild(el);
    });
  }

  async function loadPosts(){
    try{
      const r=await fetch(POSTS_SRC+'?_'+Date.now(),{cache:'no-store'});
      const data=await r.json();
      const posts=Array.isArray(data?.posts)?data.posts:[];
      render(posts.slice(0,3)); // mantém o limite existente
      qInput.addEventListener('input',()=>{
        const q=(qInput.value||'').toLowerCase().trim();
        const filtered=posts.filter(p=>(p.titulo??'').toLowerCase().includes(q)||(p.corpo??'').toLowerCase().includes(q));
        render((q?filtered:posts).slice(0,3));
      });
    }catch(e){
      postsEl.innerHTML='<article class="post-card"><p>Não foi possível carregar as postagens agora.</p></article>';
    }
  }
  loadPosts();
})();
</script>
</body>
</html>
