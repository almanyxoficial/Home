<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AlmaNyx</title>
<meta name="description" content="AlmaNyx — portal público da Espiral.">
<style>
  :root{
    --gold:#d4af37;         /* fundo dourado */
    --header:#8B0000;       /* dark red */
    --white:#ffffff;
    --black:#111111;
    --muted:#666;
    --line:#e8e8e8;
    --max: 960px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{background:var(--gold); color:var(--black); font:400 16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,Arial}

  /* Header fino */
  header{
    background:var(--header);
    color:var(--white);
    position:sticky; top:0; z-index:20;
    box-shadow:0 6px 18px rgba(0,0,0,.15);
  }
  .header-inner{
    max-width:var(--max);
    margin:0 auto;
    padding:10px 14px; /* mais fino */
    display:grid;
    grid-template-columns:40px 1fr;
    align-items:center;
    gap:10px;
  }
  .hamb{width:32px; height:32px; display:flex; flex-direction:column; justify-content:center; gap:6px; cursor:pointer}
  .hamb span{height:3px; background:#fff; border-radius:2px; transition:.3s}
  .welcome{
    text-align:right;
    font-weight:700;
    letter-spacing:.3px;
    color:#fff;
  }

  /* Menu lateral + backdrop */
  .backdrop{position:fixed; inset:0; background:rgba(0,0,0,.4); opacity:0; pointer-events:none; transition:.25s; z-index:30}
  .backdrop.show{opacity:1; pointer-events:auto}
  nav.menu{
    position:fixed; top:0; right:-100%; height:100%; width:260px;
    background:#111; color:#fff; z-index:31;
    box-shadow:-6px 0 18px rgba(0,0,0,.35);
    padding:18px; display:flex; flex-direction:column; gap:8px;
    transition:.3s;
  }
  nav.menu.open{ right:0 }
  nav.menu a{color:#fff; text-decoration:none; padding:10px 8px; border-radius:10px}
  nav.menu a:hover{ background:rgba(255,255,255,.08) }

  /* Logo central abaixo do cabeçalho */
  .logo-area{display:flex; justify-content:center; padding:14px 0}
  .logo{
    width:88px; height:88px; border-radius:999px; overflow:hidden;
    border:2px solid rgba(0,0,0,.12); background:rgba(255,255,255,.85);
    display:flex; align-items:center; justify-content:center;
    box-shadow:0 6px 18px rgba(0,0,0,.12);
  }
  .logo img{width:100%; height:100%; object-fit:cover; display:block}

  /* Banner rotativo (desktop/mobile) */
  .banner{position:relative; width:100%; max-height:300px; overflow:hidden}
  .banner img{width:100%; height:300px; object-fit:cover; display:none}
  .banner img.active{display:block}
  .dots{position:absolute; bottom:12px; left:50%; transform:translateX(-50%); display:flex; gap:6px}
  .dot{width:12px; height:12px; border-radius:50%; background:rgba(255,255,255,.6); cursor:pointer; transition:.3s}
  .dot.active{background:#fff}

  /* Container branco */
  .wrap{max-width:var(--max); margin:20px auto; padding:0 14px}
  .card{
    background:var(--white);
    color:var(--black);
    border-radius:16px;
    border:1px solid var(--line);
    box-shadow:0 8px 24px rgba(0,0,0,.10);
    padding:22px;
  }

  /* Barra de busca */
  .bar{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:16px}
  input[type="search"]{flex:1 1 320px; padding:12px 14px; border:1px solid var(--line); border-radius:10px; outline:none}

  hr.sep{border:0; border-top:1px solid var(--line); margin:16px 0}

  /* Posts */
  article{padding:16px 0; border-bottom:1px dashed var(--line)}
  article:last-child{border-bottom:none}
  article h2{margin:0 0 6px; font:700 22px/1.25 ui-serif, Georgia, serif}
  article small{display:block; color:var(--muted); margin-bottom:10px}

  /* Rodapé */
  footer{text-align:center; color:#fff; background:var(--header); padding:16px; margin-top:24px; font-size:14px}
</style>
</head>
<body>

  <!-- Cabeçalho -->
  <header>
    <div class="header-inner">
      <div class="hamb" id="menuBtn" aria-label="Abrir menu" title="Menu">
        <span></span><span></span><span></span>
      </div>
      <div class="welcome">Sejam Bem-vindos!</div>
    </div>
  </header>

  <!-- Logo central -->
  <div class="logo-area">
    <div class="logo">
      <!-- Coloque seu logo em ./logo.png -->
      <img src="./logo.png" alt="AlmaNyx">
    </div>
  </div>

  <!-- Banner (troca entre desktop/mobile) -->
  <div class="banner" id="banner">
    <!-- As imagens serão controladas via JS; deixamos 3 slots -->
    <img alt="Banner 1" class="active">
    <img alt="Banner 2">
    <img alt="Banner 3">
    <div class="dots">
      <div class="dot active" data-i="0"></div>
      <div class="dot" data-i="1"></div>
      <div class="dot" data-i="2"></div>
    </div>
  </div>

  <!-- Backdrop e menu lateral -->
  <div class="backdrop" id="backdrop"></div>
  <nav class="menu" id="menu" aria-label="Menu">
    <a href="#sobre">Sobre</a>
    <a href="#posts">Postagens</a>
    <a href="#redes">Rede Sociais</a>
    <a href="#contatos">Contatos</a>
  </nav>

  <!-- Conteúdo -->
  <main class="wrap">
    <section class="card">
      <div id="sobre">
        <h2>Sobre</h2>
        <p>Bem-vindo ao portal público da Espiral. Aqui compartilhamos reflexões selecionadas do nosso caminho.</p>
      </div>

      <hr class="sep">

      <div class="bar">
        <input id="q" type="search" placeholder="Pesquisar postagens…" autocomplete="off">
      </div>

      <section id="posts"></section>

      <hr class="sep">

      <div id="redes"><h2>Rede Sociais</h2><p>Links para WhatsApp, Telegram e YouTube.</p></div>

      <hr class="sep">

      <div id="contatos"><h2>Contatos</h2><p>Seu e-mail ou formulário de contato pode entrar aqui.</p></div>
    </section>
  </main>

  <footer>© 2025 Almanyx Oficial — All rights reserved</footer>

<script>
(function(){
  const $ = s => document.querySelector(s);
  const postsEl = $('#posts'); const qInput=$('#q');
  const menuBtn=$('#menuBtn'),menu=$('#menu'),backdrop=$('#backdrop');

  /* MENU */
  function openMenu(){menu.classList.add('open');backdrop.classList.add('show');}
  function closeMenu(){menu.classList.remove('open');backdrop.classList.remove('show');}
  menuBtn.addEventListener('click',openMenu);backdrop.addEventListener('click',closeMenu);
  document.addEventListener('keydown',e=>{if(e.key==='Escape')closeMenu();});

  /* BANNERS: desktop/mobile auto */
  const desktop = [
    './banneralmanyx01-desktop.png',
    './banneralmanyx02-desktop.png',
    './banneralmanyx03-desktop.png'
  ];
  const mobile = [
    './banneralmanyx01-mobile.png',
    './banneralmanyx02-mobile.png',
    './banneralmanyx03-mobile.png'
  ];

  const banner = $('#banner');
  const imgs = [...banner.querySelectorAll('img')];
  const dots = [...banner.querySelectorAll('.dot')];
  let idx = 0;
  let useMobile = window.innerWidth < 768;

  function sourceSet(i){
    const arr = useMobile ? mobile : desktop;
    return arr[i] || '';
  }
  function paintSources(){
    imgs.forEach((im,i)=>{ im.src = sourceSet(i); });
  }
  function show(i){
    imgs.forEach((im,n)=>im.classList.toggle('active', n===i));
    dots.forEach((d,n)=>d.classList.toggle('active', n===i));
    idx = i;
  }
  dots.forEach(d=>d.addEventListener('click',()=>show(+d.dataset.i)));

  // Auto-slide
  let timer = setInterval(()=>show((idx+1)%imgs.length), 5000);

  // Atualiza quando redimensionar (troca entre desktop/mobile)
  window.addEventListener('resize', ()=>{
    const nowMobile = window.innerWidth < 768;
    if(nowMobile !== useMobile){
      useMobile = nowMobile;
      paintSources();
      show(idx); // mantém o índice atual
    }
  });

  // inicializa
  paintSources();
  show(0);

  /* POSTS PÚBLICOS (espiral.json) */
  let DATA={posts:[]};
  function renderPosts(list){
    if(!list.length){postsEl.innerHTML='<p>Nenhum registro encontrado.</p>';return;}
    postsEl.innerHTML=list.map(p=>`
      <article id="${p.id}">
        <h2>${p.titulo}</h2>
        <small>${p.data||''}</small>
        ${p.corpo||''}
      </article>`).join('');
  }
  function filter(){
    const q=(qInput.value||'').toLowerCase().trim();
    const list=DATA.posts.filter(p=>!q||(String(p.titulo)+' '+String(p.corpo)).toLowerCase().includes(q));
    renderPosts(list);
  }
  async function load(){
    try{
      const res=await fetch('./espiral.json?v='+Date.now(),{cache:'no-store'});
      if(!res.ok) throw new Error(res.status);
      const j=await res.json();
      DATA.posts=(j.posts||[]).slice().sort((a,b)=>String(b.data||'').localeCompare(String(a.data||'')));
      filter();
    }catch(e){
      postsEl.innerHTML='<p style="color:#b00020">Erro ao carregar espiral.json.</p>';
      console.error(e);
    }
  }
  qInput.addEventListener('input',filter);
  document.addEventListener('DOMContentLoaded',load);
})();
</script>
</body>
</html>
