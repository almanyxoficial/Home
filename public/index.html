<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AlmaNyx — Portal Público</title>
<style>
  :root{
    --vinho:#8B0000; --gold:#d4af37; --bg:#fafafa;
    --fg:#171717; --muted:#666; --line:#e8e8e8; --white:#fff;
    --wrap:1000px;
  }
  *{box-sizing:border-box}
  html,body{margin:0}
  body{
    font:400 16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,Arial;
    color:var(--fg);
    background:linear-gradient(180deg,var(--gold),#c39a2d);
  }

  /* HEADER (igual vibe do primeiro) */
  header{position:sticky; top:0; z-index:50; background:var(--vinho); color:#fff; box-shadow:0 2px 8px rgba(0,0,0,.25)}
  .topbar{
    max-width:var(--wrap); margin:0 auto; padding:10px 14px;
    display:grid; grid-template-columns:40px 1fr; align-items:center; gap:10px;
  }
  .burger{width:32px; height:28px; display:grid; place-items:center; cursor:pointer}
  .burger span,.burger::before,.burger::after{content:""; display:block; width:26px; height:3px; background:#fff; border-radius:3px; transition:.25s}
  .burger::before{transform:translateY(-8px)} .burger::after{transform:translateY(8px)}
  .burger.active span{opacity:0} .burger.active::before{transform:translateY(0) rotate(45deg)} .burger.active::after{transform:translateY(0) rotate(-45deg)}
  .welcome{text-align:right; font-weight:800; letter-spacing:.3px}

  /* DRAWER */
  .backdrop{position:fixed; inset:0; background:rgba(0,0,0,.35); opacity:0; pointer-events:none; transition:.2s; z-index:55}
  .backdrop.show{opacity:1; pointer-events:auto}
  .drawer{
    position:fixed; top:0; left:0; height:100%; width:min(280px,80vw);
    background:#fff; color:#111; transform:translateX(-100%); transition:.28s; z-index:60;
    box-shadow:2px 0 16px rgba(0,0,0,.28);
  }
  .drawer.open{transform:translateX(0)}
  .drawer nav a{display:block; padding:14px 16px; text-decoration:none; color:#111; border-bottom:1px solid #eee}

  /* WRAP + LOGO */
  .wrap{max-width:var(--wrap); margin:0 auto; padding:0 14px}
  .logo-area{display:flex; justify-content:center; padding:14px 0 8px}
  .logo{width:112px; height:112px; border-radius:999px; background:#fff; display:grid; place-items:center; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.2)}
  .logo img{width:90%; height:auto; display:block}

  /* CARROSSEL — dimensão definida 16:5 (serve 1920x600 e 1080x600) */
  .carousel{position:relative; width:100%; border-radius:14px; overflow:hidden; background:#000; box-shadow:0 8px 22px rgba(0,0,0,.18)}
  .carousel .viewport{aspect-ratio:16/5; width:100%}            /* <- dimensões exatas */
  .slides{display:flex; width:100%; height:100%; transition:transform .5s ease}
  .slide{min-width:100%; height:100%}
  .slide img{
    width:100%; height:100%;
    object-fit:contain; /* não corta; ajuste seus banners já no ratio 16:5 */
    background:#000;
  }
  .nav-btn{
    position:absolute; top:50%; transform:translateY(-50%);
    width:40px; height:40px; border:none; border-radius:50%; background:rgba(0,0,0,.45); color:#fff;
    display:grid; place-items:center; cursor:pointer; z-index:2
  }
  .nav-btn:hover{background:rgba(0,0,0,.6)}
  .prev{left:10px} .next{right:10px}
  .dots{position:absolute; left:50%; bottom:10px; transform:translateX(-50%); display:flex; gap:8px}
  .dot{width:10px; height:10px; border-radius:50%; background:#ffffff80; border:1px solid #00000033; cursor:pointer}
  .dot.active{background:#fff}

  /* CONTEÚDO */
  main{padding-bottom:26px}
  section.block{margin:18px 0}
  .card{background:#fff; border-radius:16px; padding:18px; border:1px solid var(--line); box-shadow:0 8px 24px rgba(0,0,0,.12)}
  h2{margin:6px 0 10px; font:700 24px/1.25 ui-serif,Georgia,serif}

  /* BUSCA + POSTS (espiral.json) */
  .bar{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px}
  input[type="search"]{flex:1 1 320px; padding:12px 14px; border:1px solid var(--line); border-radius:10px; outline:none}
  article{padding:14px 0; border-bottom:1px dashed var(--line)}
  article:last-child{border-bottom:none}
  article h3{margin:0 0 6px; font:700 20px/1.25 ui-serif,Georgia,serif}
  article small{display:block; color:var(--muted); margin-bottom:8px}

  footer{background:var(--vinho); color:#fff; text-align:center; padding:16px; margin-top:12px}

  @media (min-width:768px){
    .logo{width:128px; height:128px}
  }
</style>
</head>
<body>
  <header>
    <div class="topbar">
      <div class="burger" id="burger"><span></span></div>
      <div class="welcome">Sejam Bem-vindos!</div>
    </div>
  </header>

  <!-- Drawer -->
  <aside class="drawer" id="drawer">
    <nav>
      <a href="#sobre" onclick="closeDrawer()">Sobre</a>
      <a href="#posts" onclick="closeDrawer()">Postagens</a>
      <a href="#redes" onclick="closeDrawer()">Redes Sociais</a>
      <a href="#contatos" onclick="closeDrawer()">Contatos</a>
    </nav>
  </aside>
  <div class="backdrop" id="backdrop"></div>

  <div class="wrap">
    <!-- LOGO -->
    <div class="logo-area">
      <div class="logo"><img src="./logo.png" alt="AlmaNyx"></div>
    </div>

    <!-- CARROSSEL (srcset + sizes; 1080 mobile, 1920 desktop) -->
    <div class="carousel" id="carousel" aria-label="Banners">
      <div class="viewport">
        <button class="nav-btn prev" id="prev" aria-label="Anterior">‹</button>
        <button class="nav-btn next" id="next" aria-label="Próximo">›</button>
        <div class="slides" id="slides">
          <div class="slide">
            <img
              src="banneralmanyx01-desktop.png"
              srcset="
                banneralmanyx01-mobile.png 1080w,
                banneralmanyx01-desktop.png 1920w
              "
              sizes="(max-width: 768px) 100vw, 100vw"
              width="1920" height="600"
              alt="Convite WhatsApp">
          </div>
          <div class="slide">
            <img
              src="banneralmanyx02-desktop.png"
              srcset="
                banneralmanyx02-mobile.png 1080w,
                banneralmanyx02-desktop.png 1920w
              "
              sizes="(max-width: 768px) 100vw, 100vw"
              width="1920" height="600"
              alt="Convite Telegram">
          </div>
          <div class="slide">
            <img
              src="banneralmanyx03-desktop.png"
              srcset="
                banneralmanyx03-mobile.png 1080w,
                banneralmanyx03-desktop.png 1920w
              "
              sizes="(max-width: 768px) 100vw, 100vw"
              width="1920" height="600"
              alt="Canal YouTube">
          </div>
        </div>
        <div class="dots" id="dots" role="tablist" aria-label="Navegação dos banners"></div>
      </div>
    </div>

    <main>
      <!-- SOBRE -->
      <section id="sobre" class="block">
        <div class="card">
          <h2>Sobre</h2>
          <p>Portal público da Espiral — reflexões e convites para harmonia, verdade e ascensão.</p>
        </div>
      </section>

      <!-- POSTS + BUSCA -->
      <section id="posts" class="block">
        <div class="card">
          <h2>Postagens</h2>
          <div class="bar">
            <input id="q" type="search" placeholder="Pesquisar postagens…" autocomplete="off">
          </div>
          <div id="list">Carregando…</div>
        </div>
      </section>

      <!-- REDES -->
      <section id="redes" class="block">
        <div class="card">
          <h2>Redes Sociais</h2>
          <ul>
            <li>WhatsApp — grupo público (link nos banners)</li>
            <li>Telegram — canal (link nos banners)</li>
            <li>YouTube — canal (link nos banners)</li>
          </ul>
        </div>
      </section>

      <!-- CONTATOS -->
      <section id="contatos" class="block">
        <div class="card">
          <h2>Contatos</h2>
          <p>E-mail: contato@almanyx.com.br</p>
        </div>
      </section>
    </main>
  </div>

  <footer>© 2025 Almanyx Oficial — All rights reserved.</footer>

<script>
/* Drawer */
const burger = document.getElementById('burger');
const drawer = document.getElementById('drawer');
const backdrop = document.getElementById('backdrop');
function openDrawer(){drawer.classList.add('open'); backdrop.classList.add('show'); burger.classList.add('active');}
function closeDrawer(){drawer.classList.remove('open'); backdrop.classList.remove('show'); burger.classList.remove('active');}
burger.addEventListener('click', ()=> drawer.classList.contains('open') ? closeDrawer() : openDrawer());
backdrop.addEventListener('click', closeDrawer);
window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeDrawer(); });

/* Carrossel */
const slides = document.getElementById('slides');
const dotsWrap = document.getElementById('dots');
const prev = document.getElementById('prev');
const next = document.getElementById('next');
const total = slides.children.length;
let idx = 0, timer;

for(let i=0;i<total;i++){
  const b = document.createElement('button');
  b.className = 'dot' + (i===0?' active':'');
  b.setAttribute('aria-label','Ir para banner '+(i+1));
  b.addEventListener('click',()=>go(i,true));
  dotsWrap.appendChild(b);
}
function paintDots(){
  [...dotsWrap.children].forEach((d,i)=>d.classList.toggle('active', i===idx));
}
function go(n, pause){
  idx = (n+total)%total;
  slides.style.transform = `translateX(${-idx*100}%)`;
  paintDots();
  if(pause) resetAuto();
}
prev.addEventListener('click',()=>go(idx-1,true));
next.addEventListener('click',()=>go(idx+1,true));
function resetAuto(){ clearInterval(timer); timer = setInterval(()=>go(idx+1,false), 5000); }
resetAuto();
/* pausa on hover */
const carousel = document.getElementById('carousel');
carousel.addEventListener('mouseenter', ()=>clearInterval(timer));
carousel.addEventListener('mouseleave', resetAuto);
/* swipe */
let touching=false, startX=0, dx=0;
carousel.addEventListener('touchstart', e=>{touching=true; startX=e.touches[0].clientX; dx=0;}, {passive:true});
carousel.addEventListener('touchmove', e=>{ if(!touching) return; dx=e.touches[0].clientX-startX; }, {passive:true});
carousel.addEventListener('touchend', ()=>{ touching=false; if(Math.abs(dx)>40){ dx>0?go(idx-1,true):go(idx+1,true);} else resetAuto(); });

/* Posts (espiral.json) + busca */
const listEl = document.getElementById('list');
const qInput = document.getElementById('q');
let DATA={posts:[]};
function render(arr){
  if(!arr.length){ listEl.innerHTML='<p style="color:#b00020">Nenhuma postagem encontrada.</p>'; return; }
  listEl.innerHTML = arr.map(p=>`
    <article id="${p.id||''}">
      <h3>${p.titulo||''}</h3>
      <small>${p.data||''}</small>
      ${p.corpo||''}
    </article>
  `).join('');
}
function filter(){
  const q=(qInput.value||'').toLowerCase().trim();
  const res = DATA.posts.filter(p=>{
    if(!q) return true;
    const hay = (String(p.titulo)+' '+String(p.corpo)).toLowerCase();
    return hay.includes(q);
  });
  render(res);
}
async function load(){
  try{
    const res = await fetch('./espiral.json?v='+Date.now(), {cache:'no-store'});
    if(!res.ok) throw new Error(res.status);
    const j = await res.json();
    DATA.posts = (j.posts||[]).slice().sort((a,b)=>String(b.data||'').localeCompare(String(a.data||'')));
    filter();
  }catch(e){
    listEl.innerHTML='<p style="color:#b00020">Erro ao carregar espiral.json.</p>';
    console.error(e);
  }
}
document.addEventListener('DOMContentLoaded', load);
qInput.addEventListener('input', filter);
</script>
</body>
</html>
